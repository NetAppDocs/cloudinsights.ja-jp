---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: パフォーマンスやインベントリのしきい値、およびメトリックやログの条件に関するアラートを生成するモニタを作成します。 
---
= モニタとのアラート


[role="lead"]
監視を作成して、ネットワーク内のリソースに関連する問題についてユーザに通知するアラートをトリガーするしきい値を設定します。たとえば、多数のプロトコルのいずれかに対して _node write latency _ に対してアラートを送信するモニタを作成できます。


TIP: モニタとアラートは、 Cloud Insights Standard Edition 以降で使用できます。

監視対象のしきい値と条件に達したとき、またはしきい値を超えたときに、 Cloud Insights はアラートを作成します。モニタには、 _Warning_threshold 、 a_Critical_threshold 、またはその両方を指定できます。

監視を使用すると、ストレージ、 VM 、 EC2 、ポートなどの「インフラ」オブジェクトや、 Kubernetes 、 ONTAP の高度な指標、 Telegraf プラグイン用に収集された統合データなどの「インフラ」オブジェクトにしきい値を設定できます。しきい値を超えたときにアラートを監視し、警告レベルのアラート、重大レベルのアラート、またはその両方のしきい値を設定できます。

については以下を参照してください link:#system-defined-monitors-preview["システム定義のモニター"] ドキュメントをプレビュー



=== モニタの作成

次の例では、 _Volume Node NFS Write Latency _reaches or exceeds 200ms 、および 400ms に達したか超えると Critical アラートを通知する監視を作成します。いずれかのしきい値を 15 分以上連続して超えた場合にのみ、アラートを表示する必要があります。



==== 要件

* 統合データを収集し、そのデータを収集するように Cloud Insights を設定する必要があります。




==== モニタを作成します

. Cloud Insights メニューで、 * Alerts > Manage Monitors * をクリックします
+
[ モニタ ] リストページが表示され、現在設定されているモニタが表示されます。

. モニタを追加するには、 *+ モニタ * をクリックします。既存のモニタを変更するには、リストでモニタ名をクリックします。
+
Monitor Configuration （モニタ設定）ダイアログが表示されます。

. ドロップダウンで、監視するオブジェクトのタイプと指標を検索して選択します。例： _NetApp_ONTAP_volume_node_name _nfs_write_latency _ 。


フィルタを設定して、監視するオブジェクトの属性や指標を絞り込むことができます。

image:MonitorMetricFilter.png["メトリックフィルタリング"]

統合データ（ Kubernetes 、 ONTAP 高度なデータなど）を使用する場合、指標フィルタリングを使用すると、データ系列の集計値でフィルタが機能し、グラフからオブジェクト全体が削除されるのとは異なり、プロットされたデータ系列から個々のデータポイントや一致しないデータポイントが削除されます。


TIP: 複数条件のモニタ（ IOPS > X 、レイテンシ > Y など）を作成するには、最初の条件をしきい値、 2 番目の条件をフィルタとして定義します。



==== モニターの条件を定義します。

. 監視するオブジェクトと指標を選択したら、警告レベルと重大レベルのしきい値、またはその両方を設定します。
. _Warning_level には、 200 を入力します。この警告レベルを示す破線がグラフの例に表示されます。
. _Critical_level の場合は、 400 と入力します。このクリティカルレベルを示す破線がグラフの例に表示されます。
+
このグラフには履歴データが表示されます。グラフ上の警告および重大レベルの線はモニタを視覚的に表しているため、モニタがアラートをトリガーするタイミングを簡単に確認できます。

. 実行間隔には、 _15 分 _ の間で _Continuously_ を選択します。
+
しきい値を超えた時点でアラートをトリガーするか、しきい値が一定期間継続して違反になるまでアラートをトリガーするかを選択できます。この例では、合計 IOPS が警告レベルまたは重大レベルを超えるたびにアラートを表示する必要はありませんが、監視対象のオブジェクトがこれらのレベルの 1 つを 15 分以上継続して超えた場合にのみアラートを表示します。

+
image:define_monitor_conditions.png["条件を定義します"]





==== フィルタを調整しています

フィルタ処理中に、入力を開始すると、現在のテキストに基づいて * ワイルドカードフィルタ * を作成するオプションが表示されます。このオプションを選択すると、ワイルドカード式に一致するすべての結果が返されます。また、 NOT または OR を使用して *expressions * を作成することもできます。また、「 None 」オプションを選択して、フィールドで null 値をフィルタリングすることもできます。

image:Type-Ahead_Monitor_1.png["ワイルドカードフィルタ"]

ワイルドカードまたは式に基づくフィルタ（例 フィルタフィールドに濃い青で表示されます。リストから直接選択した項目は、水色で表示されます。

image:Type-Ahead-Example-Wildcard-DirectSelect.png["ワイルドカードフィルタの結果"]

ワイルドカードおよび式フィルタリングは、テキストまたはリストでは機能しますが、数値、日付、またはブール値では機能しません。



=== 対処方法または追加情報を設定しています

オプションの概要を追加したり、追加のインサイトや修正アクションを追加したりするには、「 * アラート概要の追加 * 」セクションに入力します。概要は 1024 文字以内で指定し、アラートとともに送信されます。分析情報 / 対処方法のフィールドは最大 67,000 文字で、アラートランディングページの概要セクションに表示されます。

これらのフィールドには、アラートを修正したり対処したりするためのメモ、リンク、手順を入力できます。

image:Monitors_Alert_Description.png["アラートの対処方法と概要"]



=== 通知タイプと受信者を選択します

[ チーム通知の設定 ] セクションでは、電子メールと Webhook のどちらでチームに通知するかを選択できます。

image:Webhook_Choose_Monitor_Notification.png["アラート方法を選択します"]

* 電子メールによる警告 :*

アラート通知の E メール受信者を指定します。必要に応じて、警告または重大なアラートの受信者を別々に選択することもできます。

image:email_monitor_alerts.png["E メールアラートの受信者"]

* Webhook による警告 :*

アラート通知に使用する Web フックを指定します。必要に応じて、警告または重大なアラートに別のフックを選択できます。

image:Webhook_Monitor_Notifications.png["Webhook Alerting ( ウェブフック警告"]



=== モニタを保存します

. 必要に応じて、モニタの概要を追加できます。
. モニターにわかりやすい名前を付け、 * 保存 * をクリックします。
+
新しいモニタがアクティブなモニタのリストに追加されます。





=== 監視リスト

[Monitor] ページには、現在設定されているモニタが一覧表示され、次の情報が示されます

* モニタ名
* ステータス
* 監視対象のオブジェクト / 指標
* モニタの状態


モニタ名の横にある「ベル」アイコンをクリックすると、モニタに関連付けられているアクティブなアラートを表示できます。image:ViewActiveAlerts.png["モニタのアクティブなアラートを示すアイコン"]

モニターの右側にあるメニューをクリックし、 * 一時停止 * を選択すると、オブジェクトタイプの監視を一時的に停止できます。モニタリングを再開する準備ができたら、 * Resume * （続行）をクリックします。

モニタをコピーするには、メニューから「 * Duplicate （複製） * 」を選択します。その後、新しいモニタを変更して、オブジェクト / 指標、フィルタ、条件、 E メール受信者などを変更できます

モニタが不要になった場合は、メニューから * Delete * を選択して削除できます。



== グループを監視します

グループ化により、関連するモニタを表示および管理できます。たとえば、環境内のストレージ専用の監視グループを使用したり、特定の受信者リストに関連する監視を使用したりできます。

image:Monitors_GroupList.png["グループ化を監視します"]

グループ名の横には、グループに含まれるモニタの数が表示されます。

新しいグループを作成するには、 [*"+" Create New Monitor Group*] ボタンをクリックします。グループの名前を入力し、 * グループの作成 * をクリックします。空のグループがその名前で作成されます。

モニタをグループに追加するには、 _all Monitors グループ（推奨）に移動し、次のいずれかの操作を行います。

* 単一のモニタを追加するには、モニタの右側にあるメニューをクリックし、 _ グループに追加 _ を選択します。モニタを追加するグループを選択します。
* モニタ名をクリックしてモニタの編集ビューを開き '_Associate to a monitor group_ セクションでグループを選択します
+
image:Monitors_AssociateToGroup.png["グループに関連付けます"]



モニタを削除するには、グループをクリックし、メニューから「 _ グループから削除」を選択します。モニタを _all Monitors _ または _Custom Monitors _ グループから削除することはできませんこれらのグループからモニタを削除するには、モニタ自体を削除する必要があります。


NOTE: グループからモニタを削除しても、モニタは Cloud Insights から削除されません。モニタを完全に削除するには、モニタを選択し、 _Delete_( 削除 ) をクリックします。これにより、その所有者であるグループからも削除され、どのユーザからも使用できなくなります。

同様にモニタを別のグループに移動するには '_Move to Group_ を選択します


NOTE: 各モニタは、一度に 1 つのグループにしか所属できません。

グループ内のすべてのモニタを一度に一時停止または再開するには、グループのメニューを選択し、 _Pause_or_Resume_を クリックします。

同じメニューを使用して、グループの名前変更または削除を行います。グループを削除しても、 Cloud Insights からモニタは削除されません。これらのモニタは、 _ALL Monitors で使用できます。

image:Monitors_PauseGroup.png["グループを一時停止します"]



== システム定義モニタ（プレビュー）

2021 年 10 月から、 Cloud Insights は指標とログの両方についてシステム定義のモニタを多数プレビューします。モニタインタフェースには、これらのシステムモニタに対応するためのいくつかの変更が含まれます。これらについては、このセクションで説明します。


NOTE: システム定義モニタはプレビュー機能であるため、変更されることがあります。

詳細については、をご覧ください link:task_system_monitors.html["システム定義のモニター"]

デフォルトでは 2 つのグループが表示されます。

* * すべてのモニタ * にすべてのモニタが一覧表示されます。
* * カスタムモニター * には、ユーザーが作成したモニターのみが表示されます。




=== 詳細情報

* link:task_view_and_manage_alerts.html["アラートの表示と非表示"]

