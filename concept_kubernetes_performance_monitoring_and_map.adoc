---
sidebar: sidebar 
permalink: concept_kubernetes_performance_monitoring_and_map.html 
keywords: service map, workloads, Kubernetes, 
summary: Kubernetesワークロードの依存関係とフローを提示し、ネットワークとパフォーマンスの問題を明らかにします 
---
= Kubernetesのパフォーマンス監視とマッピング
:allow-uri-read: 


[role="lead"]
Kubernetes Network Performance and Map機能は、Kubernetesワークロード間の依存関係をマッピングすることで、トラブルシューティングを簡易化します。Kubernetesのネットワークパフォーマンスのレイテンシや異常をリアルタイムで可視化し、ユーザに影響が及ぶ前にパフォーマンスの問題を特定します。この機能は、Kubernetesのトラフィックフローを分析、監査することで全体的なコストを削減するのに役立ちます。


NOTE: Kubernetesのネットワークパフォーマンスとマップはです link:concept_preview_features.html["プレビュー（ Preview ）"] 機能は変更される場合があります。

主な機能:•ワークロードマップはKubernetesワークロードの依存関係とフローを示し、ネットワークとパフォーマンスの問題を強調します。•Kubernetesポッド、ワークロード、ノード間のネットワークトラフィックを監視し、トラフィックとレイテンシの問題の原因を特定します。•入力、出力、リージョン間、ゾーン間のネットワークトラフィックを分析することで、全体的なコストを削減します。

image:workload-map-animated.gif["ワークロードマップの例"]



== 前提条件

Kubernetes Network Performance and Mapを使用する前に、を設定しておく必要があります link:task_config_telegraf_agent_k8s.html["NetApp Kubernetes Monitoring Operator"] このオプションを有効にします。オペレータの配備中に、[ネットワークパフォーマンスとマップ]チェックボックスをオンにして有効にします。このオプションを有効にするには、Kubernetesランディングページに移動して[Modify Deployment]を選択します。

image:ServiceMap_NKMO_Deployment_Options.png["NKMO停止中にMapオプションを選択します"]



== モニタ

ワークロードマップでは、を使用します link:task_create_monitor.html["モニタ"] 情報を得るためにCloud Insights には、いくつかのデフォルトのKubernetesモニタが用意されています（デフォルトでは_Paused_になっている場合があります）。必要なモニタを_Resume_(つまり有効化)することも、ワークロードマップでも使用されるKubernetesオブジェクト用のカスタムモニタを作成することもできます。



== 地図

マップには、サービス（ワークロードとも呼ばれる）とそれらの相互関係が表示されます。矢印は交通の方向を示しています。ワークロードにカーソルを合わせると、そのワークロードの概要情報が表示されます（次の例を参照）。

image:ServiceMap_Simple_Example.png["ワークロードマップワークロードの例"]

円の中のアイコンは、さまざまなサービスタイプを表します。アイコンは、基になるオブジェクトにがある場合にのみ表示されます <<workload-labels,ラベル>>。

image:ServiceMap_Icons.png["サービスアイコンの説明"]

各円のサイズはノードサイズを示します。これらのサイズは相対的なものであることに注意してください。ブラウザのズームレベルまたは画面サイズは、実際の円のサイズに影響を与える可能性があります。同様に、トラフィックラインスタイルでは、接続サイズが一目でわかるようになっています。太字の実線は交通量が多く、点線は交通量が少ないです。

円の中の数字は、サービスによって現在処理されている外部接続の数です。

image:ServiceMap_Node_and_Connection_Legend.png["相対円（ノード）と接続サイズを示す凡例"]



== ワークロードの詳細とアラート

色の円は、ワークロードに関する警告レベルまたは重大レベルのアラートを示します。円にカーソルを合わせると問題 の概要が表示されます。円をクリックすると、より詳細なスライドアウトパネルが開きます。

image:Workload_Map_Slideout_with_Alert.png["ワークロードのスライドアウトの詳細とアラート"]



== フィルタリング

Cloud Insights の他の機能と同様に、必要なオブジェクトやワークロード属性に絞り込むフィルタを簡単に設定できます。

image:Workload_Map_Filtering.png["ワークロードマップのフィルタリング"]



== ワークロードラベル

表示されるワークロードのタイプ（円のアイコンなど）をマップで識別するには、ワークロードラベルが必要です。ラベルは次のように導出されます。

* 一般的な用語で実行されているサービス/アプリケーションの名前
* ソースがポッドの場合：
+
** ポッドのワークロードラベルから取得
** ワークロードの想定されるラベル：app.kubernetes.io/component
** ラベル名参照： https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/[]
** 推奨ラベル：
+
*** フロントエンド
*** バックエンド
*** データベース
*** キャッシュ
*** キュー
*** カフカ




* Kubernetesクラスタの外部にあるソースの場合：
+
** DNS解決名を解析し、サービスタイプを抽出します
+
例：s3.eu-north-1.amazonaws.com

+
s3を取得するために解析された名前を解決しました




